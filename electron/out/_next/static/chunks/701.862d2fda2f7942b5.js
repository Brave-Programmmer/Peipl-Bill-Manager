"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{86701:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var l=t(95155),a=t(12115),r=t(46914);function i(e){var s;let{isVisible:t,onClose:i,onSave:n,billData:o,companyInfo:d}=e,[c,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(""),[y,j]=(0,a.useState)(o);if((0,a.useEffect)(()=>{if(t){let e=localStorage.getItem("tempBillData");e?(j(JSON.parse(e)),localStorage.removeItem("tempBillData")):j(o)}},[t,o]),!t)return null;let N=async()=>{var e,s;let t=[];if(c.trim()||t.push("Username is required"),u.trim()||t.push("Password is required"),h.trim()||t.push("Bill name is required"),(null==y||null==(e=y.billNumber)?void 0:e.trim())||t.push("Bill number is required"),(null==y||null==(s=y.customerName)?void 0:s.trim())||t.push("Customer name is required"),(null==y?void 0:y.items)&&0!==y.items.length||t.push("At least one item is required"),t.length>0)return void v(t.join(", "));b(!0),v("");try{await new Promise(e=>setTimeout(e,1500));let e=y.items.reduce((e,s)=>{let t=parseFloat(s.amount)||0;return e+t},0),s=y.items.reduce((e,s)=>{let t=parseFloat(s.cgstAmount)||0;return e+t},0),t=y.items.reduce((e,s)=>{let t=parseFloat(s.sgstAmount)||0;return e+t},0),l=e+s+t,a=e=>{if(0===e)return"Zero";let s=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"];return e<10?s[e]:e<20?["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"][e-10]:e<100?["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"][Math.floor(e/10)]+(e%10!=0?" "+s[e%10]:""):e<1e3?s[Math.floor(e/100)]+" Hundred"+(e%100!=0?" and "+a(e%100):""):e<1e5?a(Math.floor(e/1e3))+" Thousand"+(e%1e3!=0?" "+a(e%1e3):""):e<1e7?a(Math.floor(e/1e5))+" Lakh"+(e%1e5!=0?" "+a(e%1e5):""):a(Math.floor(e/1e7))+" Crore"+(e%1e7!=0?" "+a(e%1e7):"")},r={...y,companyInfo:d,savedBy:c,savedAt:new Date().toISOString(),billName:h.trim(),total:l,subtotal:e,totalCGST:s,totalSGST:t,amountInWords:(e=>{let s=Math.floor(e),t=Math.round((e-s)*100),l=a(s)+" Rupees";return t>0&&(l+=" and "+a(t)+" Paise"),l+=" Only"})(l)},o=JSON.parse(localStorage.getItem("savedBills")||"[]"),u=o.findIndex(e=>e.billName===h.trim());u>=0?o[u]=r:o.push(r);let g=o.slice(-50);localStorage.setItem("savedBills",JSON.stringify(g)),n(r),i(),m(""),x(""),p("")}catch(e){console.error("Error saving bill:",e),v("Failed to save bill. Please try again.")}finally{b(!1)}};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white max-w-2xl w-full shadow-2xl border border-gray-200",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm flex items-center justify-center shadow-lg",children:(0,l.jsx)("span",{className:"text-white text-xl font-bold",children:"\uD83D\uDCBE"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-3xl font-bold",children:"Save Bill"}),(0,l.jsx)("p",{className:"text-blue-100 text-lg",children:"Enter credentials to save your bill"})]})]}),(0,l.jsx)("button",{onClick:i,className:"text-white hover:text-blue-200 transition-colors duration-300 text-2xl font-bold",children:"✕"})]})}),(0,l.jsxs)("div",{className:"p-6 space-y-8",children:[f&&(0,l.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-6 shadow-lg",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-red-500 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white font-bold",children:"⚠️"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-red-800 font-bold text-sm",children:"Validation Error"}),(0,l.jsx)("p",{className:"text-red-700 text-sm",children:f})]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Username"}),(0,l.jsx)("input",{type:"text",value:c,onChange:e=>m(e.target.value),className:"w-full border-2 border-gray-300 px-6 py-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-white text-gray-900 font-semibold placeholder-gray-500 text-lg hover:border-blue-400",placeholder:"Enter username"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Password"}),(0,l.jsx)("input",{type:"password",value:u,onChange:e=>x(e.target.value),className:"w-full border-2 border-gray-300 px-6 py-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-white text-gray-900 font-semibold placeholder-gray-500 text-lg hover:border-blue-400",placeholder:"Enter password"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Bill Name"}),(0,l.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"w-full border-2 border-gray-300 px-6 py-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-white text-gray-900 font-semibold placeholder-gray-500 text-lg hover:border-blue-400",placeholder:"Enter bill name"})]})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Bill Preview"}),(0,l.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 p-6 border border-gray-200 shadow-sm",children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium",children:"Bill No:"}),(0,l.jsx)("span",{className:"text-gray-900 font-bold",children:(null==y?void 0:y.billNumber)||"N/A"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium",children:"Customer:"}),(0,l.jsx)("span",{className:"text-gray-900 font-bold truncate max-w-32",children:(null==y?void 0:y.customerName)||"N/A"})]}),(null==y?void 0:y.plantName)&&(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium",children:"Plant:"}),(0,l.jsx)("span",{className:"text-gray-900 font-bold truncate max-w-32",children:y.plantName})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium",children:"Items:"}),(0,l.jsx)("span",{className:"text-gray-900 font-bold",children:(null==y||null==(s=y.items)?void 0:s.length)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium",children:"Total:"}),(0,l.jsxs)("span",{className:"text-emerald-600 font-bold",children:["₹",(()=>{if(!(null==y?void 0:y.items))return"0.00";let e=y.items.reduce((e,s)=>e+(parseFloat(s.amount)||0),0);return(e+y.items.reduce((e,s)=>e+(parseFloat(s.cgstAmount)||0),0)+y.items.reduce((e,s)=>e+(parseFloat(s.sgstAmount)||0),0)).toFixed(2)})()]})]})]})})]}),(0,l.jsx)("div",{className:"bg-white p-6 border border-gray-200 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"Ready to Save"}),(0,l.jsx)("p",{className:"text-xs text-gray-600",children:"All fields are properly configured"})]})]})})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,l.jsx)("button",{onClick:i,className:"px-8 py-4 bg-gray-500 text-white hover:bg-gray-600 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl hover:scale-105",children:"Cancel"}),(0,l.jsx)("button",{onClick:N,disabled:g,className:"px-8 py-4 bg-gradient-to-r from-emerald-500 to-teal-600 text-white hover:from-emerald-600 hover:to-teal-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-3",children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.A,{size:"sm",text:"",color:"white"}),(0,l.jsx)("span",{children:"Saving..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\uD83D\uDCBE"}),(0,l.jsx)("span",{children:"Save Bill"})]})})]})]})]})})}}}]);